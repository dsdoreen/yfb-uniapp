{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/macintoshhd/Doreen/uniapp-learning/yfb-uniapp/pages/cart/cart.vue?2469","webpack:////Users/macintoshhd/Doreen/uniapp-learning/yfb-uniapp/pages/cart/cart.vue?88a0","webpack:////Users/macintoshhd/Doreen/uniapp-learning/yfb-uniapp/pages/cart/cart.vue?e656","uni-app:///pages/cart/cart.vue","webpack:////Users/macintoshhd/Doreen/uniapp-learning/yfb-uniapp/pages/cart/cart.vue?25ca","webpack:////Users/macintoshhd/Doreen/uniapp-learning/yfb-uniapp/pages/cart/cart.vue?b3da"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8Ft1B;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA;AACA,eAHA;AAIA,qCAJA;AAKA;AACA,YANA;AAOA;AACA,mBARA;AASA,uBATA;AAUA,oBAVA;;AAYA,GAdA;AAeA,QAfA,oBAeA;AACA;AACA,GAjBA;AAkBA,QAlBA,oBAkBA;AACA;AACA,GApBA;;AAsBA;AACA;AACA,oBAFA,8BAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA,mBACA,GADA,EACA;AACA;AACA;AACA,eAJA;;AAMA,WARA,MAQA;AACA;AACA;AACA,oCADA;AAEA,qBAFA,qBAEA;AACA;AACA,yBADA,mBACA,GADA,EACA;AACA;AACA;AACA,mBAJA;;AAMA,eATA;AAUA,kBAVA,kBAUA;AACA;AACA,yBADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA,uBAHA;;AAKA,mBAPA;;AASA,eApBA;;AAsBA;;;AAGA,SAvCA;;AAyCA;;;AAGA,KArDA;AAsDA;AACA,gBAvDA,0BAuDA;AACA;AACA;;AAEA;AACA;AACA;AACA,KA9DA;AA+DA;AACA,eAhEA,uBAgEA,CAhEA,EAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,uBADA;AAEA,gCAFA;AAGA,mBAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAPA,MAOA;AACA,aAZA;;AAcA;;AAEA,OApBA,MAoBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAtGA;AAuGA;AACA,oBAxGA,4BAwGA,CAxGA,EAwGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OALA;AAMA;;AAEA,KAnHA;AAoHA;AACA,cArHA,wBAqHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAFA;AAGA,OALA,MAKA;AACA;AACA;AACA;AACA,SAFA;AAGA;;AAEA;;AAEA;AACA,KAxIA;AAyIA;AACA,aA1IA,uBA0IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA,SAPA;AAQA;AACA;AACA;AACA;;AAEA,OAfA,MAeA;AACA;AACA;AACA;AACA;AACA;AACA,KAtKA;AAuKA;AACA,aAxKA,uBAwKA;;AAEA,aAFA;;AAIA,UAJA,CAEA,OAFA,CAGA,GAHA,GAIA,IAJA,CAGA,GAHA;AAKA;AACA;AACA;AACA,sBADA;AAEA,yBAFA;;AAIA,OALA,MAKA;AACA;AACA,sBADA;AAEA,0BAFA;;AAIA,OALA,MAKA;AACA;AACA;AACA,2CADA;;AAGA;AACA,KA9LA;AA+LA;AACA,YAhMA,oBAgMA,SAhMA,EAgMA;AACA;;AAEA;AACA;AACA;AACA,KAtMA;AAuMA,iBAvMA,2BAuMA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAnNA,EAtBA,E;;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAA2/C,CAAgB,43CAAG,EAAC,C;;;;;;;;;;;ACA/gD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"app-cart\">\r\n\t\t<!-- 收货地址块 begin -->\r\n\t\t<view class=\"address_btn\" v-if=\"!address.userName\">\r\n\t\t\t<button type=\"primary\" plain @click=\"handleChooseAdrs\">+ 获取收货地址</button>\r\n\t\t</view>\r\n\t\t<view v-else class=\"address_con\">\r\n\t\t\t<view class=\"adrs_info\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t收货人：{{address.userName}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"adrs_phone\">\r\n\t\t\t\t\t{{address.telNumber}}\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"adrs_allinfo\">\r\n\t\t\t\t{{address.all}}\r\n\t\t\t</view>\r\n\r\n\r\n\t\t</view>\r\n\t\t<!-- 收货地址块 end -->\r\n\t\t<!-- 购物车列表 begin-->\r\n\t\t<view class=\"part_tit\">购物车</view>\r\n\t\t<view class=\"cart_main\">\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<view v-if=\"carts[0].goods_id\">\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t<view v-if=\"carts\">\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"cart_item\" v-for=\"(citem,idx) in carts\" :key=\"citem.goods_id\" :data-index=\"citem.goods_id\">\r\n\t\t\t\t\t\t<view class=\"cart_checks\">\r\n\t\t\t\t\t\t\t<checkbox-group @click=\"handleItemChange\">\r\n\t\t\t\t\t\t\t\t<checkbox :checked=\"citem.checked\" :data-id=\"citem.goods_id\">\r\n\t\t\t\t\t\t\t\t</checkbox>\r\n\t\t\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cart_info\">\r\n\t\t\t\t\t\t\t<view class=\"pic\">\r\n\t\t\t\t\t\t\t\t<navigator>\r\n\t\t\t\t\t\t\t\t\t<image :src=\"citem.pics[0].pics_sma\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"cont\">\r\n\t\t\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t\t\t<navigator :url=\"'/pages/goods_detail/goods_detail?goods_id='+citem.goods_id\">\r\n\t\t\t\t\t\t\t\t\t\t{{citem.goods_name}}\r\n\t\t\t\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"price_set\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t\t\t\t{{citem.goods_price}}<text class=\"txt_jf\">积分</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"step\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"sub calcbtn\" @click=\"CalcCartNum\" data-calctype=\"sub\" :data-cartid=\"citem.goods_id\">-</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"num\">{{citem.num}}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"add calcbtn\" @click=\"CalcCartNum\" data-calctype=\"add\" :data-cartid=\"citem.goods_id\">+</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"empty_cart\" v-else> 购物车为空~ </view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 购物车列表 end-->\r\n\t\t\t<!-- 购物车结算模块 begin -->\r\n\t\t\t<view class=\"cart_settlement\">\r\n\t\t\t\t<view class=\"all_check\">\r\n\t\t\t\t\t<checkbox-group @click=\"allChecked\">\r\n\t\t\t\t\t\t<checkbox :color=\"checkColor\" :checked=\"allchecked\" :disabled=\"disable\"></checkbox>全选\r\n\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"settle_cont\">\r\n\t\t\t\t\t<view class=\"font\">合计:</view>\r\n\t\t\t\t\t<view class=\"total_price\">\r\n\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t{{totalPrice}}<text class=\"txt_jf\">积分</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"txt_tips\">已包含运费</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button type=\"warn\" @click=\"handlePay\">结算({{sum}})</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 购物车结算模块 end -->\r\n\t\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taddress: {},\r\n\t\t\t\t//购物车数据\r\n\t\t\t\tcarts: [],\r\n\t\t\t\tcheckColor: 'var(--themeColor)',\r\n\t\t\t\t//总数量\r\n\t\t\t\tsum: 0,\r\n\t\t\t\t//总价格\r\n\t\t\t\ttotalPrice: 0,\r\n\t\t\t\tallchecked: false,\r\n\t\t\t\tdisable: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.initPagesData();\r\n\t\t},\n\t\tonShow() {\n\t\t\tthis.initPagesData();\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t//点击获取用户地址信息\r\n\t\t\thandleChooseAdrs() {\r\n\t\t\t\t//获取用户对小程序所授予的 获取地址权限状态 scope\r\n\t\t\t\t//假设用户点击获取地址的提示框，确定 authSetting scope.address  scope值true 直接调用收货地址\r\n\t\t\t\t//假设用户点击获取收货地址的提示框 取消\r\n\t\t\t\t//scope值 false\r\n\t\t\t\t//诱导用户自己打开授权设置页面（wx.opensetting）当用户重新给予\r\n\t\t\t\t//获取地址权限的权限 \r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res.authSetting['scope.address'])\r\n\t\t\t\t\t\tconst authSetting = res.authSetting;\r\n\t\t\t\t\t\tif (authSetting['scope.address'] === true) {\r\n\t\t\t\t\t\t\t//此处是有授权获取地址的情况\r\n\t\t\t\t\t\t\tuni.chooseAddress({\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t// console.log('有授权-授权后-获取的地址' + res)\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('address', res)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//没有授权获取地址\r\n\t\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\t\tscope: 'scope.address',\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\tuni.chooseAddress({\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log('无授权-授权后-获取的地址' + res)\r\n\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('address', res)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.chooseAddress({\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (r) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('address', r)\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.bindAdrsInfo();\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//绑定地址\r\n\t\t\tbindAdrsInfo() {\r\n\t\t\t\tlet addressobj = uni.getStorageSync('address');\r\n\t\t\t\tif (addressobj) {\r\n\r\n\t\t\t\t\taddressobj.all = addressobj.provinceName + addressobj.cityName + addressobj.countyName + addressobj.detailInfo;\r\n\t\t\t\t\tthis.address = addressobj;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//数量更改函数\r\n\t\t\tCalcCartNum(e) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconst type = e.target.dataset.calctype;\r\n\t\t\t\tconst cid = e.target.dataset.cartid;\r\n\t\t\t\tlet cart_copy = this.carts;\r\n\t\t\t\tlet index = cart_copy.findIndex(v => (v.goods_id == cid));\r\n\t\t\t\tconsole.log(index);\r\n\t\t\t\tlet cnum = cart_copy[index].num;\r\n\t\t\t\tif (type === \"sub\") {\r\n\t\t\t\t\tif (cnum > 1) {\r\n\t\t\t\t\t\tcnum--;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '是否要删除该商品？',\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tcart_copy.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\tthat.initCart(cart_copy);\r\n\t\t\t\t\t\t\t\t\tconsole.log(cart_copy);\r\n\t\t\t\t\t\t\t\t\t//改变tabbar数量\n\t\t\t\t\t\t\t\t\tgetApp().initCartNum();\n\t\t\t\t\t\t\t\t\tgetApp().setCartBar();\r\n\t\t\t\t\t\t\t\t} else if (res.cancel) {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (type === \"add\") {\r\n\t\t\t\t\tcnum++;\r\n\t\t\t\t\tconsole.log(cid + \"点击了加法\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcart_copy[index].num = cnum;\r\n\t\t\t\tthat.initCart(cart_copy);\r\n\t\t\t\t//改变tabbar数量\r\n\t\t\t\tgetApp().initCartNum();\n\t\t\t\tgetApp().setCartBar();\r\n\t\t\t},\r\n\t\t\t//商品列表选择框改变函数\r\n\t\t\thandleItemChange(e) {\r\n\t\t\t\tlet id = e.target.dataset.id;\r\n\t\t\t\tlet cart_copy = this.carts;\r\n\t\t\t\tcart_copy.forEach(v => {\n\t\t\t\t\r\n\t\t\t\t\tif (v.goods_id == id) {\r\n\t\t\t\t\t\tv.checked = !v.checked;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.initCart(cart_copy);\r\n\r\n\t\t\t},\r\n\t\t\t//全选反选函数\r\n\t\t\tallChecked() {\r\n\t\t\t\tlet allChecked = !this.allchecked;\r\n\t\t\t\tlet cart_copy = this.carts;\n\t\t\r\n\t\t\t\tif (allChecked) {\r\n\t\t\t\t\t//全选选中的时候\r\n\t\t\t\t\tcart_copy.forEach(v => {\r\n\t\t\t\t\t\tv.checked = true\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//全选反选的时候\r\n\t\t\t\t\tcart_copy.forEach(v => {\r\n\t\t\t\t\t\tv.checked = false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.allchecked = allChecked;\r\n\r\n\t\t\t\tthis.initCart(cart_copy);\r\n\t\t\t},\r\n\t\t\t//获取缓存中的数据，并计算价格并存入data和缓存中\r\n\t\t\tCalcPrice() {\r\n\t\t\t\t//获取缓存中的购物车商品列表\r\n\t\t\t\tlet cart = uni.getStorageSync('cart');\n\t\t\t\t\r\n\t\t\t\t//总价格 总数量\r\n\t\t\t\tlet totalprice = 0;\r\n\t\t\t\tlet totalsum = 0;\r\n\t\t\t\tif (cart.length != 0) {\r\n\t\t\t\t\tlet allChecked = true;\r\n\t\t\t\t\tcart.forEach(v => {\r\n\t\t\t\t\t\tif (v.checked) {\r\n\t\t\t\t\t\t\ttotalprice += v.goods_price * v.num;\r\n\t\t\t\t\t\t\ttotalsum += v.num;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallChecked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.carts = cart;\r\n\t\t\t\t\tthis.allchecked = allChecked;\r\n\t\t\t\t\tthis.totalPrice = totalprice;\r\n\t\t\t\t\tthis.sum = totalsum;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.allchecked = false;\r\n\t\t\t\t\tthis.totalPrice = 0;\r\n\t\t\t\t\tthis.sum = 0;\r\n\t\t\t\t\tthis.disable = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//结算\r\n\t\t\thandlePay() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\taddress,\r\n\t\t\t\t\tsum\r\n\t\t\t\t} = this;\n\t\t\t\t// console.log(sum);\r\n\t\t\t\tif (sum <= 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '没有选中商品',\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (!address.userName) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '您还没收货地址',\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//跳转到支付页面\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/pay/pay?type=\"cart\"',\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//initCart 重新初始化数组的信息\r\n\t\t\tinitCart(cart_copy) {\r\n\t\t\t\tthis.carts = cart_copy;\r\n\r\n\t\t\t\tuni.setStorageSync('cart', cart_copy);\r\n\t\t\t\t//重新计算价格\r\n\t\t\t\tthis.CalcPrice();\r\n\t\t\t},\n\t\t\tinitPagesData(){\n\t\t\t\tconst cart = uni.getStorageSync('cart');\n\t\t\t\t\t\t\n\t\t\t\tthis.carts = cart;\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\tthis.bindAdrsInfo();\n\t\t\t\t// #endif\n\t\t\t\t//设置购物车右上角数量\n\t\t\t\tgetApp().initCartNum();\n\t\t\t\tgetApp().setCartBar();\n\t\t\t\t//计算价格及全选状态等\n\t\t\t\tthis.CalcPrice();\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.app-cart {\r\n\t\tmargin: 20rpx 0;\r\n\r\n\t\t.address_btn {\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\tbutton {\r\n\t\t\t\twidth: 80%;\r\n\t\t\t\tfont-weight: normal;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.address_con {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tborder-bottom: 1px solid var(--themeColor);\r\n\r\n\t\t\t.adrs_info {\r\n\t\t\t\tflex: 5;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t// align-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t.adrs_allinfo {\r\n\t\t\t\t// border-top: 1px solid #efefef;\r\n\t\t\t\tpadding-top: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.adrs_phone {\r\n\t\t\t\tflex: 2;\r\n\t\t\t\ttext-align: right;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.cart_main {\r\n\t\t\tborder-top: 1px solid var(--themeColor);\r\n\t\t\tpadding-bottom: 50rpx;\r\n\r\n\t\t\t.cart_item {\r\n\t\t\t\tmargin: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tborder-bottom: 1px solid #efefef;\r\n\r\n\t\t\t\t.cart_checks {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.cart_info {\r\n\t\t\t\t\tflex: 5;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\r\n\r\n\t\t\t\t\t.pic {\r\n\t\t\t\t\t\tflex: 2;\r\n\t\t\t\t\t\tmargin-right: 30rpx;\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.cont {\r\n\t\t\t\t\t\tflex: 5;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t\t\t\t.name {\r\n\t\t\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.price_set {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t\t\t.price {\r\n\t\t\t\t\t\t\t\tflex: 2;\r\n\t\t\t\t\t\t\t\ttext-align: left;\r\n\t\t\t\t\t\t\t\tcolor: var(--themeColor);\r\n\t\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.step {\r\n\t\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t\t\t\t.calcbtn {\r\n\t\t\t\t\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\t\t\t\t\tborder: 1px solid #efefef;\r\n\t\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.empty_cart {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tmargin: 30rpx;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t.cart_settlement {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100rpx;\r\n\t\t\tbackground: #fff;\r\n\t\t\tborder-top: 1px solid #efefef;\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 100rpx;\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tbottom: 0;\r\n\t\t\t// #endif\r\n\t\t\tleft: 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.all_check {\r\n\t\t\t\tflex: 2;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t.settle_cont {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tflex: 6;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.font {\r\n\t\t\t\t\tflex: 2;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.total_price {\r\n\t\t\t\t\tflex: 4;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbutton {\r\n\t\t\t\t\tflex: 3;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\tborder-radius: 0;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tbackground-color: var(--themeColor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1593746236557\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}